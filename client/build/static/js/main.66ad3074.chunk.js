(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t){},125:function(e,t){},144:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(10),i=a.n(c),r=a(12),l=a(190),s=a(180),o=a(175),j=a(191),d=a(181),b=a(85),u=a.n(b),x=a(16),O=a(178),m=a(147),h=a(86),p=a(64),f=a.n(p),g=a(3),v=Object(n.createContext)(),C=Object(h.a)("http://localhost:5000"),w=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(x.a)(a,2),i=c[0],r=c[1],l=Object(n.useState)(!1),s=Object(x.a)(l,2),o=s[0],j=s[1],d=Object(n.useState)(),b=Object(x.a)(d,2),u=b[0],O=b[1],m=Object(n.useState)(""),h=Object(x.a)(m,2),p=h[0],w=h[1],y=Object(n.useState)({}),N=Object(x.a)(y,2),k=N[0],I=N[1],S=Object(n.useState)(""),D=Object(x.a)(S,2),B=D[0],R=D[1],V=Object(n.useRef)(),A=Object(n.useRef)(),E=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){O(e),V.current.srcObject=e})),C.on("me",(function(e){return R(e)})),C.on("calluser",(function(e){var t=e.from,a=e.name,n=e.signal;console.log("test9"),I({isReceivedCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(g.jsx)(v.Provider,{value:{call:k,callAccepted:i,myVideo:V,userVideo:A,stream:u,name:p,setName:w,callEnded:o,me:B,callUser:function(e){var t=new f.a({initiator:!0,trickle:!1,stream:u});t.on("signal",(function(t){console.log("test1"),C.emit("calluser",{userToCall:e,signalData:t,from:B,name:p})})),t.on("stream",(function(e){console.log("test2"),A.current.srcObject=e})),C.on("callaccepted",(function(e){console.log("test3"),r(!0),t.signal(e)})),E.current=t},leaveCall:function(){j(!0),E.current.destroy(),window.location.reload()},answerCall:function(){r(!0);var e=new f.a({initiator:!1,trickle:!1,stream:u});e.on("signal",(function(e){C.emit("answercall",{signal:e,to:k.from})})),e.on("stream",(function(e){A.current.srcObject=e})),e.signal(k.signal),E.current=e}},children:t})},y=a(182),N=a(183),k=a(184),I=Object(o.a)((function(e){return{video:Object(r.a)({width:"550px"},e.breakpoints.down("xs"),{width:"330px"}),gridContainer:Object(r.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"},icons:{display:"flex",justifyContent:"center"}}})),S=function(){var e=Object(n.useContext)(v),t=e.name,a=e.callAccepted,c=e.myVideo,i=e.userVideo,r=e.callEnded,l=e.stream,o=e.call,j=I(),b=Object(n.useState)(c),u=Object(x.a)(b,2),h=(u[0],u[1],function(){}),p=function(){c.current.srcObject=c.current.srcObject=null};return Object(g.jsxs)(O.a,{container:!0,className:j.gridContainer,children:[l&&Object(g.jsxs)(m.a,{className:j.paper,children:[Object(g.jsxs)(O.a,{item:!0,xs:12,md:6,children:[Object(g.jsx)(s.a,{variant:"h5",gutterBottom:!0,children:t||"User's name: "}),Object(g.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:j.video})]}),Object(g.jsxs)("div",{className:j.icons,children:[Object(g.jsx)(d.a,{color:"inherit","aria-label":"Mic",children:Object(g.jsx)(y.a,{onClick:h,children:Object(g.jsx)(N.a,{})})}),Object(g.jsx)(d.a,{color:"inherit","aria-label":"Videocam",children:Object(g.jsx)(y.a,{onClick:p,children:Object(g.jsx)(k.a,{})})})]})]}),a&&!r&&Object(g.jsxs)(m.a,{className:j.paper,children:[Object(g.jsxs)(O.a,{item:!0,xs:12,md:6,children:[Object(g.jsx)(s.a,{variant:"h5",gutterBottom:!0,children:o.name||"Name"}),Object(g.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:j.video})]}),Object(g.jsxs)("div",{className:j.icons,children:[Object(g.jsx)(d.a,{color:"inherit","aria-label":"Mic",children:Object(g.jsx)(y.a,{onClick:h,children:Object(g.jsx)(N.a,{})})}),Object(g.jsx)(d.a,{onClick:p,color:"inherit","aria-label":"Videocam",children:Object(g.jsx)(y.a,{children:Object(g.jsx)(k.a,{})})})]})]})]})},D=a(185),B=function(){var e=Object(n.useContext)(v),t=e.answerCall,a=e.call,c=e.callAccepted;return Object(g.jsx)(g.Fragment,{children:a.isReceivedCall&&!c&&Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(g.jsxs)("h1",{children:[a.name," is calling: "]}),Object(g.jsx)(D.a,{varient:"contained",color:"primary",onClick:t,children:"Answer"})]})})},R=a(186),V=a(192),A=a(84),E=a(187),U=a(188),W=a(189),M=Object(o.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(r.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(r.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),z=function(e){var t=e.children,a=Object(n.useContext)(v),c=a.me,i=a.callAccepted,r=a.name,l=a.setName,o=a.callEnded,j=a.leaveCall,d=a.callUser,b=Object(n.useState)(""),u=Object(x.a)(b,2),h=u[0],p=u[1],f=M();return Object(g.jsx)(R.a,{className:f.container,children:Object(g.jsxs)(m.a,{elevation:10,className:f.paper,children:[Object(g.jsx)("form",{className:f.root,noValidate:!0,autoComplete:"off",children:Object(g.jsxs)(O.a,{container:!0,className:f.gridContainer,children:[Object(g.jsxs)(O.a,{item:!0,xs:12,md:6,className:f.padding,children:[Object(g.jsx)(s.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(g.jsx)(V.a,{label:"Name",value:r,onChange:function(e){return l(e.target.value)},fullWidth:!0}),Object(g.jsx)(A.CopyToClipboard,{text:c,className:f.margin,children:Object(g.jsx)(D.a,{varient:"contained",color:"primary",fullWidth:!0,startIcon:Object(g.jsx)(E.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(g.jsxs)(O.a,{item:!0,xs:12,md:6,className:f.padding,children:[Object(g.jsx)(s.a,{gutterBottom:!0,variant:"h6",children:"Make a call"}),Object(g.jsx)(V.a,{label:"ID to Call",value:h,onChange:function(e){return p(e.target.value)},fullWidth:!0}),i&&!o?Object(g.jsx)(D.a,{varient:"contained",color:"secondary",startIcon:Object(g.jsx)(U.a,{fontSize:"large"}),fullWidth:!0,onClick:j,className:f.margin,children:"Hang Up"}):Object(g.jsx)(D.a,{varient:"contained",color:"primary",startIcon:Object(g.jsx)(W.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return d(h)},className:f.margin,children:"Call"})]})]})}),t]})})},P=Object(o.a)((function(e){return{appBar:Object(r.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},menuButton:{marginRight:e.spacing(2)}}})),T=function(){var e=P();return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:e.root,children:Object(g.jsx)(l.a,{position:"static",children:Object(g.jsxs)(j.a,{children:[Object(g.jsx)(d.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(g.jsx)(u.a,{})}),Object(g.jsx)(s.a,{variant:"h3",className:e.title,align:"center",children:"Face Chat"})]})})}),Object(g.jsxs)("div",{className:e.wrapper,children:[Object(g.jsx)(S,{}),Object(g.jsx)(z,{children:Object(g.jsx)(B,{})})]})]})};a(144);i.a.render(Object(g.jsx)(w,{children:Object(g.jsx)(T,{})}),document.getElementById("root"))}},[[145,1,2]]]);
//# sourceMappingURL=main.66ad3074.chunk.js.map